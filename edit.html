<!DOCTYPE html>
<html lang="en">

<head>

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Markdown Editor with live preview">
	<meta name="author" content="Jeffrey Meng">

	<title>Clean Blog - Sample Post</title>

	<!-- Bootstrap Core CSS -->
	<link href="css/bootstrap.min.css" rel="stylesheet">

	<!-- Custom CSS -->
	<link href="css/clean-blog.min.css" rel="stylesheet">

	<!-- Custom Fonts -->
	<link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
	<link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="css/splitpane.min.css" type="text/css" />
	<style type="text/css">
		html,
		body {
			height: 100%;
			min-height: 100%;
			margin: 0;
			padding: 0;
		}
		
		#left-component {
			width: 20em;
			/* Same as divider left */
		}
		
		#my-divider {
			left: 20em;
			width: 5px;
			background-color: gray;
		}
		
		#right-component {
			left: 20em;
			/* Same as divider left */
			margin-left: 5px;
			/* Same as divider width */
		}
	</style>

	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

	<!-- Navigation -->
	<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
		<div class="container-fluid">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header page-scroll">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="index.html">Start Bootstrap</a>
			</div>

			<!-- Collect the nav links, forms, and other content for toggling -->
			<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
				<ul class="nav navbar-nav navbar-right">
					<li>
						<a href="index.html">Home</a>
					</li>
					<li>
						<a href="about.html">About</a>
					</li>
					<li>
						<a href="post.html">Sample Post</a>
					</li>
					<li>
						<a href="contact.html">Contact</a>
					</li>
				</ul>
			</div>
			<!-- /.navbar-collapse -->
		</div>
		<!-- /.container -->
	</nav>

	<!-- Page Header -->
	<!-- Set your background image for this header on the line below. -->
	<header class="intro-header" style="background-image: url('img/post-bg.jpg')">
		<div class="container">
			<div class="row">
				<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
					<div class="post-heading">
						<h1>Post Editor</h1>
						<h2 class="subheading">Create a new post here</h2>
						<span class="meta">Posted by Jeffrey Meng on January 17, 2016</span>
					</div>
				</div>
			</div>
		</div>
	</header>

	<p>

		<a href="javascript:fullScreen()">Full Screen</a>
	</p>
	<input id="post-form-title" class="form-control" placeholder="Title of your post no html or markdown is supported">
	<br>
	<input id="post-form-subtitle" class="form-control" placeholder="Subtitle of your post no html or markdown is supported">
	<br>
	<input id="post-form-meta" class="form-control" placeholder="Meta of your post(format: posted on 12/13/2015 by your name) replace the date with the current date no html or markdown is supported">
	<br>
	<a name="fullscreen" id="sphe"></a>
	<div class="pretty-split-pane-frame">
		<div class="split-pane fixed-left" style="min-width: 5px;">
			<textarea class="split-pane-component markdown" id="left-component" style="width: 50%;resize: none;">
				
			</textarea>
			<div class="split-pane-divider" id="my-divider" style="left: 50%;">
				<div class="split-pane-divider-inner"></div>
			</div>
			<div class="split-pane-component" id="right-component" style="left: 50%;">
				<div class="pretty-split-pane-component-inner" id="preview">
					
				</div>
			</div>
			<div class="split-pane-resize-shim" style="display: none;"></div>
		</div>
		<br>
		<div class="input-group">
		  <span class="input-group-addon" id="url-adon-input-group">http://jeffreymeng.github.io/fireblog/post.html<b>#</b></span>
		  <input type="text" class="form-control" id="url" aria-describedby="url-adon-input-group" placeholder="URL of your post. A short one word url is the best. Spaces will be replaced by - unless you add something else.">
		</div>
		<br>
		<button class="btn btn-defualt form-control" id="submit">Post</button>
	</div>
<!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <ul class="list-inline text-center">
                        <li>
                            <a href="#">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    </ul>
                    <p class="copyright text-muted">Copyright &copy; 2016 Jeffrey Meng</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="js/clean-blog.min.js"></script>
    <script src="js/markdown.js"></script>
    <script src="js/fireblog.js"></script>
    
    <script src="js/splitpane.min.js"></script>
    <script>
    $(document).ready(function(){
        var editor = $(".markdown");
        var preview = $("#preview");
        editor.val(localStorage.getItem("post"));
        preview.html(convertToHtml(localStorage.getItem("post")));
        
    });
        /* global convertToHtml */
       $(function() {
            var source=$(".markdown");
            var output=$("#preview");
            source.keyup(function() {
               localStorage.setItem("post", source.val());
               output.html(convertToHtml(source.val().replace("{{exit full screen}}", "<a href='splitpane.html' style='color:blue;text-decoration:underline;'>Click to enabe Scrolling</a>")));

            });
        });
        
        
    </script>
    <script>
    /* global Firebase */
    $(document).ready(function(){
    	$("#submit").click(function(){
    		var title = $("#post-form-title").val();
    		var subtitle = $("#post-form-subtitle").val();
    		var meta = $("#post-form-meta").val();
    		var content = $("#markdown").val();
    		var url = "http://jeffreymeng.github.io/fireblog/post.html#" + $("#url").val();
    		var fb = new Firebase("https://jeffreyblog.firebaseio.com/posts").val();
			fb.child(url).once('value', function(snapshot) {
			   var exists = (snapshot.val() !== null);
			   if (exists) {
			   		if (prompt("The url was already taken. Do you want to override the content at this url? type yes or no ") === "yes") {
			   			fb.child(url).set({
			   			"title":title,
			   			"subtitle":subtitle,
			   			"meta":meta,
			   			"content":content
			   			})
			   		} else {
			   			alert("Your post was not posted.")
			   		}
			   		
			   } else {
			   		fb.child(url).set({
			   			"title":title,
			   			"subtitle":subtitle,
			   			"meta":meta,
			   			"content":content
			   		})
			   		alert("your post was posted. The url for the post is " + url + ".")
			   }
			});
    	});
    });
		$(function() {
			$('div.split-pane').splitPane();
			});

		function fullScreen() {
			window.location.hash = "#";
			disableScroll();
			window.location.hash="#fullscreen";
		}
		

// left: 37, up: 38, right: 39, down: 40,
// spacebar: 32, pageup: 33, pagedown: 34, end: 35, home: 36
var keys = {37: 1, 38: 1, 39: 1, 40: 1};

function preventDefault(e) {
  e = e || window.event;
  if (e.preventDefault)
      e.preventDefault();
  e.returnValue = false;  
}

function preventDefaultForScrollKeys(e) {
    if (keys[e.keyCode]) {
        preventDefault(e);
        return false;
    }
}

function disableScroll() {
  if (window.addEventListener) // older FF
      window.addEventListener('DOMMouseScroll', preventDefault, false);
  window.onwheel = preventDefault; // modern standard
  window.onmousewheel = document.onmousewheel = preventDefault; // older browsers, IE
  window.ontouchmove  = preventDefault; // mobile
  document.onkeydown  = preventDefaultForScrollKeys;
}

function enableScroll() {
    if (window.removeEventListener)
        window.removeEventListener('DOMMouseScroll', preventDefault, false);
    window.onmousewheel = document.onmousewheel = null; 
    window.onwheel = null; 
    window.ontouchmove = null;  
    document.onkeydown = null;  
}
	</script>

</html>
